<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>じゃんけん</title>
  <link href="https://fonts.googleapis.com/css?family=Noto+Sans+JP" rel="stylesheet" />
  <link rel="stylesheet" href="css/janken.css">
</head>

<body>
  <main>

<!-- 
チーズの工場でチーズを製造する担当です
相手の出したじゃんけんに対して順番に勝つと正しく製造できます    
成功するかしないかはあなた次第です
-->

<!-- 
相手のじゃんけんを覚えましょう
それを記憶してください
それではグー・チョキ・パーで順番に勝てるように進めましょう
-->

<!-- 
成功：おいしいチーズができました
失敗：工程が壊れました、品質問題発生です。
-->


    <div class="title">
      <div id="title04"><img src="images/factory08.jpg" class="small_image_width460pix" id="titleImg"></div>
      <div id="title01">あなたは、チーズの工場でチーズを製造する担当です</div>
      <div id="title02">製造手順じゃんけんに対して順番に勝つと正しく製造できます</div>    
      <div id="title03">手順を守らないとチーズが大変なことになります</div>
    </div>

    <div class="img_table1">
      <div><img src="images/factory04.jpg" class="small_image_width100pix"></div>
      <div><img src="images/jk_type0.jpg" class="small_image_width100pix" id="img01"></div>
      <div><img src="images/jk_type0.jpg" class="small_image_width100pix" id="img02"></div>
      <div><img src="images/jk_type0.jpg" class="small_image_width100pix" id="img03"></div>
      <div><img src="images/jk_type0.jpg" class="small_image_width100pix" id="img04"></div>
      <div><img src="images/jk_type0.jpg" class="small_image_width100pix" id="img05"></div>
      <div><img src="images/jk_type0.jpg" class="small_image_width100pix" id="img06"></div>
      <div><img src="images/jk_type0.jpg" class="small_image_width100pix" id="img07"></div>
      <div><img src="images/jk_type0.jpg" class="small_image_width100pix" id="img08"></div>
      <div><img src="images/jk_type0.jpg" class="small_image_width100pix" id="img09"></div>
      <div><img src="images/jk_type0.jpg" class="small_image_width100pix" id="img10"></div>
    </div>

    <div class="img_table1">
      <div><img src="images/factory06.jpg" class="small_image_width100pix"></div>
      <div><img src="images/jk_type0.jpg" class="small_image_width100pix" id="img11"></div>
      <div><img src="images/jk_type0.jpg" class="small_image_width100pix" id="img12"></div>
      <div><img src="images/jk_type0.jpg" class="small_image_width100pix" id="img13"></div>
      <div><img src="images/jk_type0.jpg" class="small_image_width100pix" id="img14"></div>
      <div><img src="images/jk_type0.jpg" class="small_image_width100pix" id="img15"></div>
      <div><img src="images/jk_type0.jpg" class="small_image_width100pix" id="img16"></div>
      <div><img src="images/jk_type0.jpg" class="small_image_width100pix" id="img17"></div>
      <div><img src="images/jk_type0.jpg" class="small_image_width100pix" id="img18"></div>
      <div><img src="images/jk_type0.jpg" class="small_image_width100pix" id="img19"></div>
      <div><img src="images/jk_type0.jpg" class="small_image_width100pix" id="img20"></div>
    </div>

    <div class="titleB">
      <div id="title05">G's Factory</div>
    </div>

    <section>
      <button id="botton_1">Start</button>
      <button id="jk_type1" class="jk_type_button">グー</button>
      <button id="jk_type2" class="jk_type_button">チョキ</button>
      <button id="jk_type3" class="jk_type_button">パー</button>
    </section>
  </main>

  <!-- JQueryライブラリ読み込み -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script>
    //スタートボタン押したとき
    //相手のじゃんけんを並べる
    // 0:グー
    // 1:チョキ
    // 2:パー

    //constで定義した変数は再代入できないので、代入が必要であればletを使って変数を定義する
    let click_num = 0; //クリック回数カウント
 
    const imgnum = ["#img01","#img02","#img03","#img04","#img05","#img06","#img07","#img08","#img09","#img10"]
    const imgnumMy = ["#img11","#img12","#img13","#img14","#img15","#img16","#img17","#img18","#img19","#img20"]
    //let array_num = Math.floor(Math.random() * 10) + 1;// 0から2までのどれか
    let jk_aite = new Array(array_num);
    let jk_My = new Array(array_num);




    //Startボタンを押したときに 相手の手を順番に表示する部分
    $("#botton_1").on("click", function () {

      let array_num = Math.floor(Math.random() * 10) + 1;// 0から2までのどれか

      for(let i = 0; i < 10; i++){
        $(imgnum[i]).attr('src', 'images/jk_type0.jpg');
      }   

      click_num = 0;
      $("#title01").text("相手のじゃんけんを覚えましょう");
      $("#title02").text("それを記憶してください");
      $("#title03").text("それではグー・チョキ・パーで順番に勝てるように進めましょう");
      $("#title05").text("START");
      $(titleImg).attr('src', 'images/factory08.jpg');

      for(let i = 0; i < array_num; i++){
        let randomNumber1 = Math.floor(Math.random() * 3);// 0から2までのどれか
        console.log(randomNumber1);
  
        if(randomNumber1 === 0){
          $(imgnum[i]).attr('src', 'images/jk_type1.jpg');
          jk_aite[i] = 0;
          console.log("i:",i);
          console.log("jk_aite[]:",jk_aite[i]);
        }else if(randomNumber1 === 1){
          $(imgnum[i]).attr('src', 'images/jk_type2.jpg');
          jk_aite[i] = 1;
          console.log("i:",i);
          console.log("jk_aite[]:",jk_aite[i]);
        }else{
          $(imgnum[i]).attr('src', 'images/jk_type3.jpg');
          jk_aite[i] = 2;
          console.log("i:",i);
          console.log("jk_aite[]:",jk_aite[i]);
        }
      }

      for(let i = 0; i < array_num; i++){
          $(imgnumMy[i]).attr('src', 'images/jk_type0.jpg');
      }    

    });

    //グーチョキパーボタンを押したときに 自分の手を順番に表示する部分
//    let count = 0;
//    while(count < 5){
//      count++;


      $("#jk_type1").on("click", function () {
        if(click_num < array_num){
          $(imgnumMy[click_num]).attr('src', 'images/jk_type1.jpg');
          jk_My[click_num] = 0;
          console.log("click_num:",click_num);
          console.log("jk_My[]:",jk_My[click_num]);

          for(let i = 0; i < 10; i++){
            $(imgnum[i]).attr('src', 'images/jk_type0.jpg');
          }    
  

          //相手がチョキで自分がグー
          if(jk_aite[click_num] === 1){
            $("#title05").text("〇");

            if(click_num ===(array_num - 1)){
              $(titleImg).attr('src', 'images/ok_cheese.jpg');
              $("#title01").text("製造成功");
              $("#title02").text("GooD！！");
              $("#title03").text("美味しいチーズができました");
            }

          }else{
            $("#title05").text("ｘ");
            $(titleImg).attr('src', 'images/factory10.jpg');
            $("#title01").text("製造失敗");
            $("#title02").text("！！");
            $("#title03").text("工程が壊れました、品質問題発生です");
            click_num = array_num;
          }

          click_num++;
        };
      });

      $("#jk_type2").on("click", function () {
        if(click_num < array_num){
          $(imgnumMy[click_num]).attr('src', 'images/jk_type2.jpg');
          jk_My[click_num] = 1;

          for(let i = 0; i < 10; i++){
            $(imgnum[i]).attr('src', 'images/jk_type0.jpg');
          }    

          //相手がパーで自分がチョキ
          if(jk_aite[click_num] === 2){
            $("#title05").text("〇");

            if(click_num === (array_num -1)){
              $(titleImg).attr('src', 'images/ok_cheese.jpg');
              $("#title01").text("製造成功");
              $("#title02").text("調子良し");
              $("#title03").text("美味しいチーズができました");
            }

          }else{
            $("#title05").text("ｘ");
            $(titleImg).attr('src', 'images/factory10.jpg');
            $("#title01").text("製造失敗");
            $("#title02").text("！！");
            $("#title03").text("工程が壊れました、品質問題発生です");
            click_num = array_num;
          }

          console.log("click_num:",click_num);
          console.log("jk_My[]:",jk_My[click_num]);
          click_num++;
        };
      });

      $("#jk_type3").on("click", function () {
        if(click_num < array_num){
          $(imgnumMy[click_num]).attr('src', 'images/jk_type3.jpg');
          jk_My[click_num] = 2;

          for(let i = 0; i < 10; i++){
            $(imgnum[i]).attr('src', 'images/jk_type0.jpg');
          }    

          //相手がグーで自分がパー
          if(jk_aite[click_num] === 0){
            $("#title05").text("〇");
            
            if(click_num === (array_num -1)){
                $(titleImg).attr('src', 'images/ok_cheese.jpg');
                $("#title01").text("製造成功");
                $("#title02").text("パーフェクト");
                $("#title03").text("美味しいチーズができました");
            }

          }else{
            $("#title05").text("ｘ");
            $(titleImg).attr('src', 'images/factory10.jpg');
            $("#title01").text("製造失敗");
            $("#title02").text("！！");
            $("#title03").text("工程が壊れました、品質問題発生です");
            click_num = array_num;
          }
          console.log("click_num:",click_num);
          console.log("jk_My[]:",jk_My[click_num]);
          click_num++;

        };
      });


//    }


  </script>
</body>

</html>